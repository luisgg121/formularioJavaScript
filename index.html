<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div>
        <div id="menu" class="contenedor">
            <ul>
                <li><a class="active" href="index.html">Inicio</a></li>
                <!-- <li><a href="biblia.html">La Biblia</a></li>
                <li><a href="quijote.html">Don Quijote de la Mancha</a></li> -->
                <li><a href="principito.html">El Principito</a></li>
                <li><a href="formulario.html">Formulario</a></li>
                <li><a href="acerca.html">Acerca de</a></li>
            </ul>
        </div>

        <div class="contenedor">
            <h2>Computación Cliente Servidor - Actividad 2</h2>
            <p>Nota.- Para acceder al formato y validación solicitados en la actividad 2, favor de dar clic en la liga
                correspondiente a <a href="formulario.html">Formulario</a> en el menú principal al inicio de esta página.</p>
            <p>El objetivo de la actividad es realizar una página web utilizando Javascript con un formulario que se debe
                validar.</p>
            <p>Los requisitos mínimos solicitados, así como su cumplimiento, se relacionan a continuación: </p>
            <p class="requisito"> - El formulario debe utilizar etiquetas HTML5.</p>
            <p class="respuesta">Ver archivo formulario.html</p>
            <p class="requisito"> - El formulario contendrá campos de por lo menos 5 tipos diferentes (por ejemplo, texto, fecha,
                contraseña, etc.).</p>
            <p class="respuesta">Se utilizaron campos de: texto, email, teléfono, fecha y url.</p>
            <p class="requisito"> - El formulario debe tener la funcionalidad necesaria para que existan al menos dos comprobaciones en
                Javascript, para que no sean posibles en HTML5. Por ejemplo, se pueden validar correos electrónicos,
                direcciones de sitios web, formato del DNI español con su letra, etc.
            <p class="respuesta">Todos los campos fueron validados (texto, email, teléfono, fecha y url)</p>
            </p>Cuando se entregue el formulario se deberá:</p>
            <p class="requisito"> • Si había algún campo erróneo, informar de los errores detectados y redirigir al usuario al formulario
                para que lo pueda cumplimentar debidamente.</p>
            <p class="respuesta">La siguiente imagen muestra los errores detectados.</p>
            <img class="imagen" src="./recursos/InformacionInvalida.png">
            <p class="requisito"> • Si todos los campos eran correctos, generar un informe con las validaciones realizadas y mostrarlo por
                pantalla.</p>
            <p class="respuesta">La siguiente imagen muestra el informe generado al final del formulario.</p>
            <img class="imagen" src="./recursos/informe.png">
            <p class="requisito"> - Al final del código se incluirá un comentario de no más de 200 palabras que explique el funcionamiento
                del código implementado.</p>
            <textarea rows="20" cols="150">

                Explicación del funcionamiento del código implementado para la validación (archivo validación.php):

Inicialmente definimos e inicializamos las variables tanto para mostrar errores como para los datos del libro que recibimos para validación.

Para mostrar errores de validación
$autorErr = "";
$emailErr = "";
$telefonoErr = "";
$libroErr = "";
$fechaErr = "";
$resumenErr = "";
$urlErr = "";

Para los datos del libro
$autor = "";
$email = "";
$telefono = "";
$libro = "";
$fecha = "";
$resumen = "";
$url = "";

Validación de los campos de entrada recibidos con el método POST
Únicamente explicaré la validación de un campo, en este caso el nombre del autor, ya que todas las validaciones son similares

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Validación del nombre del autor
    // Primero validamos que el campo no sea vacío
    if (empty($_POST["autor"])) {
        $autorErr = "El nombre del autor es requerido";
    } else {
        $autor = input_data($_POST["autor"]);
        // Checamos que el nombre del autor contenga únicamente letras del alfabeto, espacios, números y guiones bajos.
        if (!preg_match("/^[a-zA-Z0-9_\sñáéíóúÁÉÍÓÚ]*$/", $autor)) {
            $autorErr = "Únicamente letras del alfabeto, números y guión bajo son permitidos para el nombre del autor";
        }
    }

...     
}


// Para manejar espacios en blanco y caracteres especiales en los datos utilizamos la siguiente función:
function input_data($data)
{
    $data = trim($data); // para remover espacios al inicio de los datos
    // Para evitar ataques Cross-Site Scripting (XSS) debemos convertir caracteres especiales en sus correspondientes entidades HTML, ejemplo - "&" -> "&amp"
    $data = htmlspecialchars($data);
    return $data;
}

            </textarea>
        </div>
    </div>
    <p class="contenedor">
        <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img style="border:0;width:88px;height:31px" src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
                alt="¡CSS Válido!" />
        </a>
    </p>
</body>

</html>