<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div>
        <div id="menu" class="contenedor">
            <ul>
                <li><a class="active" href="index.html">Inicio</a></li>
                <!-- <li><a href="biblia.html">La Biblia</a></li>
                <li><a href="quijote.html">Don Quijote de la Mancha</a></li> -->
                <li><a href="principito.html">El Principito</a></li>
                <li><a href="formulario.html">Formulario</a></li>
                <li><a href="acerca.html">Acerca de</a></li>
            </ul>
        </div>

        <div class="contenedor">
            <h2>Computaci√≥n Cliente Servidor - Actividad 2</h2>
            <p>Nota.- Para acceder al formato y validaci√≥n solicitados en la actividad 2, favor de dar clic en la liga
                correspondiente a <a href="formulario.html">Formulario</a> en el men√∫ principal al inicio de esta p√°gina.</p>
            <p>El objetivo de la actividad es realizar una p√°gina web utilizando Javascript con un formulario que se debe
                validar.</p>
            <p>Los requisitos m√≠nimos solicitados, as√≠ como su cumplimiento, se relacionan a continuaci√≥n: </p>
            <p class="requisito"> - El formulario debe utilizar etiquetas HTML5.</p>
            <p class="respuesta">Ver archivo formulario.html</p>
            <p class="requisito"> - El formulario contendr√° campos de por lo menos 5 tipos diferentes (por ejemplo, texto, fecha,
                contrase√±a, etc.).</p>
            <p class="respuesta">Se utilizaron campos de: texto, email, tel√©fono, fecha y url.</p>
            <p class="requisito"> - El formulario debe tener la funcionalidad necesaria para que existan al menos dos comprobaciones en
                Javascript, para que no sean posibles en HTML5. Por ejemplo, se pueden validar correos electr√≥nicos,
                direcciones de sitios web, formato del DNI espa√±ol con su letra, etc.
            <p class="respuesta">Todos los campos fueron validados (texto, email, tel√©fono, fecha y url)</p>
            </p>Cuando se entregue el formulario se deber√°:</p>
            <p class="requisito"> ‚Ä¢ Si hab√≠a alg√∫n campo err√≥neo, informar de los errores detectados y redirigir al usuario al formulario
                para que lo pueda cumplimentar debidamente.</p>
            <p class="respuesta">La siguiente imagen muestra los errores detectados.</p>
            <img class="imagen" src="./recursos/InformacionInvalida.png">
            <p class="requisito"> ‚Ä¢ Si todos los campos eran correctos, generar un informe con las validaciones realizadas y mostrarlo por
                pantalla.</p>
            <p class="respuesta">La siguiente imagen muestra el informe generado al final del formulario.</p>
            <img class="imagen" src="./recursos/informe.png">
            <p class="requisito"> - Al final del c√≥digo se incluir√° un comentario de no m√°s de 200 palabras que explique el funcionamiento
                del c√≥digo implementado.</p>
            <textarea rows="20" cols="150">

Explicaci√≥n del funcionamiento del c√≥digo implementado para la validaci√≥n (archivo validaci√≥n.js):


En la siguiente l√≠nea de c√≥digo definimos el elemento btnEnviar el cual nos servir√° para escuchar el evento clic (ver √∫ltima l√≠nea del c√≥digo)
  
const btnEnviar = document.getElementById("btnEnviar");

A continuaci√≥n, creamos una funci√≥n flecha que nos servir√° para validar el formulario:

const validarFormulario = (e) => {
    e.preventDefault();

    const miElemento = document.getElementById("reporte"); 

Limpiamos el reporte de la validaci√≥n.
    miElemento.innerHTML = ""; 

y leemos los datos cargados en el formulario:
    var autor = document.forms["formulario"]["autor"].value;
    var email = document.forms["formulario"]["email"].value;
    ...

    Vamos a validar con expresiones regulares, antes inicializamos la variable ‚Äúerror‚Äù a false, si encontramos alg√∫n error en la validaci√≥n le asignamos true a dicha variable  
    var error = false;
    var expRegular = "";

Ya que todas las validaciones son similares, solamente explicaremos la relativa al campo email.
Primero se define la expresi√≥n regular:
    expRegular = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/
y validamos que email cumpla con dicha expresi√≥n:
    if (expRegular.test(email))
        document.getElementById('emailErr').textContent = "";
en caso contrario presentamos un mensaje de error junto al valor del campo en el formulario.
    else {
        document.getElementById('emailErr').textContent = 'Por favor ingresa un email v√°lido.';
        error = true;
    }

Si todas las comprobaciones son correctas, se presenta el reporte de campos validados   
    if (!error) {
            param = document.createElement("h2");
            node = document.createTextNode("Los datos se han validado exitosamente üëç");
            param.appendChild(node);
            document.getElementById('reporte').appendChild(param);

            param = document.createElement("p");
            node = document.createTextNode("Autor: " + autor);
            param.appendChild(node);
            document.getElementById('reporte').appendChild(param);
‚Ä¶ y seguimos desplegandp todos los campos del formulario con sus valores.



En el caso de que exista alg√∫n error, √©ste se despliega junto al campo en cuesti√≥n y adicionalmente se genera una nota al final del formulario:
        } else {
            param = document.createElement("h2");
            node = document.createTextNode("Hay informaci√≥n inv√°lida ‚ùå");
            param.appendChild(node);
            document.getElementById('reporte').appendChild(param);
            
            param = document.createElement("p");
            node = document.createTextNode("Por favor corrija los datos!");
            param.appendChild(node);
            document.getElementById('reporte').appendChild(param);
        }
    }

Aqu√≠ escuchamos el clic soble el bot√≥n ‚ÄúbtnEnviar:
btnEnviar.addEventListener("click", validarFormulario);
 */



            </textarea>
        </div>
    </div>
    <p class="contenedor">
        <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img style="border:0;width:88px;height:31px" src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
                alt="¬°CSS V√°lido!" />
        </a>
    </p>
</body>

</html>